# Ball Merge Game - UI/UX デザインレビューレポート

**レビュー日**: 2026-02-13
**対象ファイル**: `C:/Users/show8/Documents/ClaudeWork/BallMergeGame/index.html`
**構成**: 単一HTML (1797行) + Matter.js + Canvas 2D描画
**前回レビュー**: 2026-02-09 (今回は全面改訂)

---

## 目次

1. [タイトル画面（新規追加）](#1-タイトル画面新規追加)
2. [ボール描画（各球種の模様）](#2-ボール描画各球種の模様)
3. [カラーパレット](#3-カラーパレット)
4. [UI要素](#4-ui要素)
5. [エフェクト](#5-エフェクト)
6. [レスポンシブ対応](#6-レスポンシブ対応)
7. [全体的な見映え](#7-全体的な見映え)
8. [優先度付き改善サマリーテーブル](#優先度付き改善サマリーテーブル)
9. [総合評価](#総合評価)

---

## 1. タイトル画面（新規追加）

**現状評価: B+**

### 良い点

- **情報の階層構造が明確**: タイトル → サブタイトル → ハイスコア → 進化チャート → あそびかた → 連鎖ボーナス → ボムシステム → ミッション → スタート、と論理的な順序で配置されている
- **`drawTitleSectionLine()` によるセクション区切り**: 装飾線（左右のライン）＋ 中央テキストのデザインがセクション間の視認性を高めている。`ctx.measureText` でテキスト幅を計測し、ライン長を動的に調整する実装は丁寧
- **ボムのグラフィック付き説明**: `drawBombGraphic(50, bombSecY + 70, 20, 3)` でボム実物を横に表示しているのは直感的で良い。導火線のスパークアニメーションもタイトル画面で動作する
- **パルスアニメーションの「TAP TO START」**: `0.6 + Math.sin(Date.now() * 0.004) * 0.4` による 0.2〜1.0 の緩やかな点滅がユーザーの注意を引く
- **進化チャートがタイトル画面にもある**: 11段階のボールを r=8 でプレビュー表示しており、ゲーム内容を事前に理解できる
- **タイトル文字のドロップシャドウ**: `(cx + 2, 37)` に影を描画してから本体を描画するレイヤリングが立体感を出している
- **条件付きハイスコア表示**: `if (highScore > 0)` で初回プレイ時は非表示にする配慮

### 改善が必要な点

#### 1-1. 情報量が多すぎて縦に長い（優先度: 高）

タイトル画面のコンテンツが `chartBaseY`（約95〜105px）から `startY`（最低650px）まで約550px以上を占める。720pxの画面高さに対してかなり詰め込まれており、テキストの行間も20〜21pxと窮屈。ハイスコアが存在する場合は `chartBaseY` が105に上がり、全体がさらに10px下にずれて底部が圧迫される。

**修正案A**: タイトル画面を2ページ構成にする。

```javascript
// showTitle を数値にして、1=メイン画面, 2=詳細ルール, 0=ゲーム開始
let showTitle = 1;

function drawTitleScreen() {
  // 共通背景描画...
  if (showTitle === 1) {
    drawTitlePage1(); // タイトル + 進化チャート + 簡易ルール + "TAP FOR MORE"
  } else if (showTitle === 2) {
    drawTitlePage2(); // ボム詳細 + ミッション + "TAP TO START"
  }
}

// 入力ハンドラ
canvas.addEventListener('mousedown', (e) => {
  if (showTitle === 1) { showTitle = 2; return; }
  if (showTitle === 2) { showTitle = 0; return; }
  // ...
});
```

**修正案B（より簡易）**: ミッション・ボムの詳細説明を省略し、「ミッション達成でボム獲得!」の1行にまとめる。

#### 1-2. ルール説明テキストのフォントサイズが小さい（優先度: 中）

ルール本文が12px、補足が10pxで、モバイル端末で `canvasScale` が 0.85 程度になると実効サイズが約10px/8.5pxになり、読みづらくなる。

**修正案**:

```javascript
// ルール本文
ctx.font = '13px "Segoe UI", Arial, sans-serif';  // 12px → 13px
// 補足テキスト
ctx.font = '11px "Segoe UI", Arial, sans-serif';  // 10px → 11px
// 行間も拡大
const ry = playY + 24 + i * 22;  // 20px → 22px
```

#### 1-3. ボム説明のレイアウトにアンバランスさ（優先度: 低）

ボムアイコンの中心Y座標 `bombSecY + 70` と、テキスト群（`bombSecY + 24` から `bombSecY + 24 + 4*21 = bombSecY + 108`）の中心 `bombSecY + 66` がほぼ一致しているが、テキスト群の上端はアイコンより上にあるため、見た目のバランスとしてアイコンがやや下に寄っている。

**修正案**:

```javascript
// ボムアイコンの中心をテキスト群の視覚的中央に合わせる
const bombIconY = bombSecY + 24 + (bombRules.length * 21) / 2;
drawBombGraphic(50, bombIconY, 20, 3);
```

#### 1-4. 「TAP TO START」の位置が可変で不安定（優先度: 中）

`Math.max(missionSecY + 80, 650)` により位置が動的に決まるが、コンテンツ量によっては画面下端ギリギリに来るか、スケーリング次第で画面外にはみ出す可能性がある。

**修正案**: 画面下端から逆算して常に視認可能な位置に配置する。

```javascript
const startY = GAME_HEIGHT - 55; // 常に画面下端から55pxの位置
```

---

## 2. ボール描画（各球種の模様）

**現状評価: A-**

### 良い点

前回レビュー（2026-02-09）からの改善が多数反映されており、ボール描画の品質は大幅に向上している。

| Lv | 球種 | 主要デザイン要素 | 前回からの変化 | 評価 |
|----|------|-----------------|---------------|------|
| 1 | ピンポン玉 | ラジアルグラデーション + ブランドストライプ(`rgba(255,138,101,0.3)`, 幅 `r*0.14`) | 色変更(`#F5F5F5`→`#FFF3E0`) + ストライプ新規追加 | 優秀 |
| 2 | ゴルフボール | 15箇所のディンプル + 3Dラジアルグラデーション | 3Dグラデーション強化 | 優秀 |
| 3 | スカッシュボール | 光沢グラデーション + 黄色スピードドット2個(`#FFD600`, r*0.12) | ドット新規追加 | 優秀 |
| 4 | テニスボール | 白い縫い目2本（`arc` による曲線） | 変更なし | 良好 |
| 5 | 野球ボール | 赤い縫い目曲線 + 左右各7本のティックマーク | 変更なし | 優秀 |
| 6 | ソフトボール | 赤い縫い目曲線 + ステッチマーク | 変更なし | 良好 |
| 7 | ハンドボール | 3Dグラデーション + パネルライン2本 + グリップドット(5x3=15個) | グラデーション+グリップドット新規追加 | 良好 |
| 8 | サッカーボール | 五角形パターン(中央1+周囲5) + 接続ライン5本 | 変更なし | 優秀 |
| 9 | バレーボール | 3色グラデーション + 黄色パネル塗り(`rgba(255,235,59,0.07)`) + パネルライン3本 | パネル塗り新規追加 | 優秀 |
| 10 | バスケットボール | オレンジグラデーション + 十字線 + 左右弧線 | 変更なし | 優秀 |
| 11 | バランスボール | 3段階ラジアルグラデーション + 縦リブ7本 + ハイライト楕円 + 赤道リング | リブ新規追加 | 良好 |

### 個別の評価詳細

**ピンポン玉のストライプ（新規）**: `rgba(255,138,101,0.3)` の薄いストライプは公式球のブランドロゴ帯を連想させ、品がある。幅 `r*0.14` は十分控えめ。

**スカッシュボールのドット（新規）**: 黄色2ドット配置（`r*0.28, r*0.22` と `r*0.48, r*0.22`）は実際のスカッシュボールのスピード表示を忠実に再現。黒い球体に鮮やかな黄色が映える。

**ゴルフボールの3Dグラデーション（強化）**: `rgba(200,185,0,0.08)` の微妙な金色エッジが高級感を加えている。

**ハンドボールのグリップドット（新規）**: パネルライン間にテクスチャを付加。実際のハンドボールのグリップ感を表現。

**バレーボールのパネル塗り（新規）**: `rgba(255,235,59,0.07)` のごく薄い黄色がパネル間の微妙な色差を表現。控えめだが確実に情報量を増やしている。

**バランスボールのリブ（新規）**: 7本の縦線（間隔 `r*0.22`）が追加。赤道リングとの交差が立体的な溝を表現。

### 改善が必要な点

#### 2-1. バランスボールのリブが薄すぎて見えにくい（優先度: 中）

```javascript
// 現状: 1507-1508行目
ctx.strokeStyle = 'rgba(255,255,255,0.08)'; // alpha 0.08 はかなり薄い
ctx.lineWidth = r * 0.02; // r=110 でも lineWidth = 2.2
```

ピンク系の地色（`#EC407A` → `#C2185B` のグラデーション）に対して白の alpha 8% は事実上ほぼ見えない。前回レビューの提案値がそのまま採用されているが、実際の描画結果を見ると期待通りの視認性が得られていない。

**修正案**:

```javascript
ctx.strokeStyle = 'rgba(255,255,255,0.18)'; // 0.08 → 0.18 (2倍以上に)
ctx.lineWidth = Math.max(1.5, r * 0.03);    // 0.02 → 0.03
```

#### 2-2. 進化チャートの小サイズ（r=8）での描画品質（優先度: 低）

進化チャート（`drawEvolutionChart`, 1013-1043行目）とタイトル画面でボールが `r=8` で描画されるが、ディンプル・グリップドット・ティックマーク等の細かい模様はこのサイズでは潰れてしまう。描画処理自体は無駄にならないが、視覚的に意味のないピクセル描画が行われている。

**修正案**: 小サイズ描画時に簡略化モードを追加。

```javascript
function drawBallGraphic(x, y, r, level) {
  const d = BALL_DATA[level];
  ctx.save();
  ctx.translate(x, y);

  ctx.beginPath();
  ctx.arc(0, 0, r, 0, Math.PI * 2);
  ctx.save();
  ctx.clip();

  // 小サイズ (r < 12) では簡略描画
  if (r < 12) {
    const sg = ctx.createRadialGradient(-r * 0.3, -r * 0.3, 0, 0, 0, r);
    sg.addColorStop(0, 'rgba(255,255,255,0.3)');
    sg.addColorStop(0.5, d.color);
    sg.addColorStop(1, d.outline);
    ctx.fillStyle = sg;
    ctx.fillRect(-r, -r, r * 2, r * 2);
  } else {
    // 通常の switch/case 描画
    switch (level) { /* ... */ }
  }
  ctx.restore();
  // outline + level number ...
}
```

#### 2-3. ハンドボールのグリップドットの配置範囲がパネルライン間に収まりきれていない（優先度: 低）

```javascript
// 現状: 1406-1412行目
// 5x3 = 15個のドットが -r*0.24〜+r*0.24 の狭い範囲に集中
for (let gi = 0; gi < 5; gi++) {
  for (let gj = 0; gj < 3; gj++) {
    ctx.arc(-r * 0.24 + gi * r * 0.12, -r * 0.08 + gj * r * 0.08, r * 0.02, 0, Math.PI * 2);
  }
}
```

パネルライン（`y = -r*0.78 〜 -r*0.05` と `y = r*0.05 〜 r*0.78`）で区切られた中央ゾーン内にドットが密集しすぎている。もう少し範囲を広げてパネルライン間全体を覆う方が自然。

**修正案**:

```javascript
ctx.fillStyle = 'rgba(255,255,255,0.10)';
for (let gi = 0; gi < 6; gi++) {
  for (let gj = 0; gj < 4; gj++) {
    ctx.beginPath();
    ctx.arc(-r * 0.30 + gi * r * 0.12, -r * 0.12 + gj * r * 0.08, r * 0.025, 0, Math.PI * 2);
    ctx.fill();
  }
}
```

#### 2-4. レベル番号がボール模様と干渉する（優先度: 低）

全ボールに `ctx.fillText(level, 0, 1)` でレベル番号を中央に重ねているが、サッカーボールの中央五角形やバスケットボールの十字交差点と完全に重なり、模様の美しさを損なう場面がある。

**修正案**: 番号を少し下にオフセットして模様の空白部に配置する。

```javascript
ctx.fillText(level, 0, r * 0.2);
```

---

## 3. カラーパレット

**現状評価: A-**

### 良い点

- **背景色 `#3E2723` (Material Brown 900)**: ゲーム全体に温かみのある落ち着いた印象を与え、明るいボールの色がよく映える
- **ゲームエリア背景 `#FFF8E1` (Material Amber 50)**: 明るすぎず暗すぎず、全11種のボールとの良好なコントラストを確保。特に暗色のスカッシュボール(`#212121`)と明色のピンポン玉(`#FFF3E0`)の両方が視認可能
- **壁色 `#5D4037` (Material Brown 700)**: 背景(`#3E2723`)→壁(`#5D4037`)→エリア(`#FFF8E1`)と3段階の明度変化が空間の奥行きを生んでいる
- **タイトル画面のグラデーション背景**: `#3E2723` → `#2D1B14` → `#1A0E0A` の3段階グラデーションがゲーム画面のフラット背景と差別化されている
- **レベル間のカラー分布**: 隣接レベルで色相が大きく異なり（白→黄→黒→黄緑→白→黄→橙→灰→青→橙→桃）、混同しにくい
- **UIテキストのカラー階層**: タイトル `#FFECB3` / スコア `#FFFFFF` / ベスト `#FFD54F` / ラベル `#BDBDBD` / サブテキスト `#8D6E63` と5段階の明度・色相使い分け
- **チェインテキストの段階色**: 2チェイン=`#FFEB3B`(黄) / 3=`#FF9800`(橙) / 4=`#FF4081`(赤桃) / 5+=`#E040FB`(紫) と興奮度に応じた色温度上昇
- **前回指摘の改善反映**: ピンポン玉(`#F5F5F5`→`#FFF3E0`)とアウトライン(`#BDBDBD`→`#FFAB91`)の変更により、Lv5野球ボール(`#ECEFF1`)との色差が明確になった

### 改善が必要な点

#### 3-1. Lv.7（ハンドボール）とLv.10（バスケットボール）のオレンジ系色被り（優先度: 中）

```javascript
// 56行目: Lv.7 ハンドボール
{ color: '#FF8A65', outline: '#D84315' }  // 薄オレンジ / 深オレンジ
// 59行目: Lv.10 バスケットボール
{ color: '#E65100', outline: '#BF360C' }  // 濃オレンジ / 深赤オレンジ
```

サイズ差（r=60 vs r=96）はあるが、複数ボールが画面に混在する状況では色だけで瞬時に判別しづらい。特にスカッシュボールのドット(`#FFD600`)やソフトボール(`#FFF176`)も含めると、暖色系のレベルが多い。

**修正案**: ハンドボールの色をより赤寄りに変更。

```javascript
{ name: 'ハンドボール', r: 60, score: 280, color: '#EF5350', outline: '#C62828' }
```

#### 3-2. デッドライン赤とバスケットボール色の近さ（優先度: 低）

デッドライン `#F44336` とバスケットボール `#E65100` は共にウォーム系。デッドラインの危険域にバスケットボールがある場合、微妙に溶け込む可能性がある。

**修正案**: デッドラインの色をより蛍光的な赤に変更。

```javascript
ctx.strokeStyle = active ? '#FF1744' : 'rgba(255,23,68,0.4)';
```

---

## 4. UI要素

**現状評価: B+**

### 良い点

- **ヘッダーの前面描画**: `drawHeader()` がボール描画後に呼ばれ（878行目）、ヘッダー背景で物理ボールの溢れを必ず隠す安全設計
- **スコア左・ベスト右の対称配置**: ゲームUI慣習に従った自然な配置
- **NEXT表示のコンパクトさ**: テキスト「NEXT」+ ミニボール（最大r=13制限: `Math.min(BALL_DATA[nextLevel].r, 13)`）が右上に収まる
- **ミッション行の1行情報密度**: ミッション名 + プログレスバー + 達成数値 + ボムボタンを1行（y=110付近）に配置
- **プログレスバーのカラーフィードバック**: 未完了=`#FF9800`(オレンジ)、完了=`#4CAF50`(グリーン) の直感的な色分け
- **ボムボタンの3状態表現**: 無効(グレー背景/グレー文字)、有効(白半透明背景/白文字)、活性(オレンジ背景/オレンジ枠+「BOMB ON」表示) が明確に区別されている
- **ゲームオーバー画面の角丸Retryボタン**: `#4CAF50`(グリーン)のボタンが暗い画面上で高い視認性を持つ。`#388E3C` のストロークで縁取りされた丁寧な実装
- **ゲームオーバー情報の段階提示**: GAME OVER(y=300) → SCORE(y=355) → NEW RECORD(y=395) → BEST(y=425) → MISSIONS(y=450) → Retry(y=470) と視線が自然に下に流れる
- **ドロップガイドライン**: 破線 `[4, 6]`、`rgba(100,100,100,0.25)` の控えめなガイダンスがゲームプレイを邪魔しない
- **ボムモード表示の二重フィードバック**: ヘッダーのボール名が「BOMB Lv.X」に変化（913-916行目）+ ボムボタンが「BOMB ON」に変化 の2箇所で現在のモードを示す

### 改善が必要な点

#### 4-1. ボムボタンのタップ領域が小さい（優先度: 高）

```javascript
// 722行目
const BOMB_BTN = { x: AREA_X + AREA_W - 90, y: 104, w: 90, h: 28 };
```

28pxの高さはApple HIG推奨の最小タップサイズ44pxを大きく下回っている。`canvasScale` が 0.85（幅357pxの端末）の場合、実際のピクセル高さは約24pxになり、操作ミスが頻発する。

**修正案A**: ボタンの描画サイズ自体を拡大。

```javascript
const BOMB_BTN = { x: AREA_X + AREA_W - 100, y: 98, w: 100, h: 36 };
```

**修正案B**: 描画サイズは変えず当たり判定だけ拡大。

```javascript
function tryBombButton(mx, my) {
  const pad = 8; // 上下左右に8px拡張
  const b = BOMB_BTN;
  if (mx >= b.x - pad && mx <= b.x + b.w + pad &&
      my >= b.y - pad && my <= b.y + b.h + pad) {
    if (bombStock > 0) bombMode = !bombMode;
    return true;
  }
  return false;
}
```

#### 4-2. ヘッダーが画面の約20%を占めている（優先度: 中）

```
行1: タイトル "Ball Merge Game"  (y=6,  高さ~24px)
行2: SCORE / BEST               (y=36, 高さ~16px)
行3: ボール名 / NEXT            (y=62, 高さ~13px)
行4: 進化チャート                (y=86, 高さ~20px)
行5: ミッション + ボムボタン      (y=110, 高さ~28px)
合計: AREA_Y = 140px = 画面高さの19.4%
```

ゲームエリア `AREA_H = 570px` に対してヘッダー140pxは情報量に比して広すぎる。特にプレイ中にタイトルテキスト「Ball Merge Game」が常時表示されている必要性は低い。

**修正案**: プレイ中はタイトルを省略し、SCORE/BESTを上に詰める。AREA_Yを120に縮小すればゲームエリアが20px広がる。

```javascript
// タイトル省略版のヘッダー
function drawHeader() {
  ctx.fillStyle = '#3E2723';
  ctx.fillRect(-20, 0, GAME_WIDTH + 40, AREA_Y);

  // SCORE / BEST を y=8 に配置（タイトル行を省略）
  ctx.font = 'bold 16px "Segoe UI", Arial, sans-serif';
  ctx.textAlign = 'left';
  ctx.fillStyle = '#FFFFFF';
  ctx.fillText('SCORE: ' + score, AREA_X, 10);
  // ...
}
```

#### 4-3. ミッションテキストのフォントサイズが小さい（優先度: 中）

```javascript
// 946行目: ミッション名
ctx.font = 'bold 11px "Segoe UI", Arial, sans-serif';
// 965行目: progress数値
ctx.font = '10px "Segoe UI", Arial, sans-serif';
// 955行目: プログレスバー
const barH = 6;
```

11px + 10px + 6pxのバー高さでは、スケーリング後にミッション情報が読み取りにくくなる。

**修正案**:

```javascript
ctx.font = 'bold 12px "Segoe UI", Arial, sans-serif'; // 11→12
ctx.font = '11px "Segoe UI", Arial, sans-serif';       // 10→11
const barH = 8; // 6 → 8
```

#### 4-4. ゲームオーバー画面にカーソルフィードバックがない（優先度: 低）

Retryボタン上でマウスカーソルがデフォルトのままで、クリック可能であることが直感的に伝わらない。

**修正案**: `mousemove` イベント内でカーソル変更を追加。

```javascript
canvas.addEventListener('mousemove', (e) => {
  if (gameOver) {
    const g = toGameCoords(e.clientX, e.clientY);
    const b = RETRY_BTN;
    canvas.style.cursor =
      (g.x >= b.x && g.x <= b.x + b.w && g.y >= b.y && g.y <= b.y + b.h)
        ? 'pointer' : 'default';
    return;
  }
  // 通常プレイ中
  canvas.style.cursor = 'crosshair';
  // ...
});
```

---

## 5. エフェクト

**現状評価: A**

### 良い点

- **パーティクルシステム**: 放射状に飛散（`Math.PI * 2 * i / count`）し、重力影響（`p.vy += 0.1`）で自然な弧を描く。大小2パターン（`big` パラメータ: 通常合体12個 / MAX消滅24個 / ボム爆発18個）で演出の強度を使い分け
- **フロートスコアテキスト**: 合体地点から上昇（`vy: -2`）しながらフェードアウト。黒ストローク（`lineWidth: 3`）の縁取りでどの背景色上でも可読性を確保
- **チェインテキスト**: スケールアニメーション（`scl: 0.5` → `1.5`）でインパクトある出現。チェイン数に応じた4段階の色変化が段階的な興奮を演出
- **画面フラッシュ**: MAXレベル消滅時 `flashAlpha = 0.6` / ボム爆発時 `flashAlpha = 0.3` と強度を使い分け、ゲーム内イベントの重要度を反映
- **シェイク**: `Math.sin(Date.now() * 0.05) * 3` の高速振動がデッドライン警告として効果的。解除後は `*= 0.9` で指数的に減衰（約23フレームで0.1以下に）
- **ボム爆発エフェクト**: ラジアルグラデーション（黄0%→橙30%→透明100%）+ 衝撃波リング（`lineWidth` が `3 * (1 - progress)` で時間経過で細くなる）の2層構造
- **ボムの導火線スパーク**: `Date.now() % 300` による300ms周期の常時アニメーション。白い中心（`sparkR * 0.4`）を持つ二重丸構造で、`globalAlpha` でスパーク自体がフェードする
- **MISSION CLEAR!テキスト**: `globalAlpha` によるフェードアウト + 黒ストローク（`lineWidth: 4`）縁取り + 「BOMB +1」の報酬表示

### 改善が必要な点

#### 5-1. フロートスコアテキスト同士の重なり（優先度: 低）

同じ位置で連続合体が起きると、複数の「+XXX」テキストが完全に重なって読めない。

**修正案**: Y座標に既存テキストとの重複回避ロジックを追加。

```javascript
function addFloatText(x, y, text, color) {
  for (const f of floatTexts) {
    if (Math.abs(f.x - x) < 30 && Math.abs(f.y - y) < 25) {
      y -= 22; // 既存テキストの上にずらす
    }
  }
  floatTexts.push({ x, y, text, color, alpha: 1, vy: -2, life: 1000 });
}
```

#### 5-2. パーティクルの描画負荷管理（優先度: 低）

大量のパーティクルが同時発生する可能性がある（MAX消滅24個 + ボム爆発18個 + 巻き添え各6個 = 最大100個以上）。

**修正案**: パーティクル数の上限を設ける。

```javascript
const MAX_PARTICLES = 150;
function spawnParticles(x, y, color, count, big) {
  const space = MAX_PARTICLES - particles.length;
  const actual = Math.min(count, space);
  for (let i = 0; i < actual; i++) {
    // ...
  }
}
```

#### 5-3. ボム結果テキストの視認時間が短い（優先度: 低）

`addFloatText` のデフォルト `life: 1000` が使われているが、ボムの結果は通常得点より情報量が多い（「BOMB! x3」等）。

**修正案**: ボム結果専用に表示時間を延長。

```javascript
// processBombExplosion 内で直接 push
floatTexts.push({
  x: bx, y: by,
  text: 'BOMB! x' + destroyCount,
  color: '#FF6D00',
  alpha: 1, vy: -1.5, life: 1500  // 1000→1500, vy: -2→-1.5
});
```

---

## 6. レスポンシブ対応

**現状評価: B**

### 良い点

- **devicePixelRatio 対応済み**: 前回レビューで指摘した高DPI問題が解決されている。146-157行目で `dpr` を取得し、`canvas.width/height` に DPR を乗算、`canvas.style.width/height` でCSS上のサイズを指定、`ctx.setTransform(dpr, 0, 0, dpr, 0, 0)` でコンテキストにスケールを適用する3段構えの実装
- **ビューポートメタタグ**: `maximum-scale=1.0, user-scalable=no` でピンチズーム無効化
- **タッチイベント全面対応**: `touchstart`/`touchmove`/`touchend` に `passive: false` + `e.preventDefault()` で完全制御
- **`touch-action: none`**: CSS側でもタッチスクロール等を無効化
- **`canvasScale` 計算**: `Math.min(ww / GAME_WIDTH, wh / GAME_HEIGHT)` でアスペクト比を保持
- **PC大画面制限**: `ww >= 600` で `canvasScale` 最大1.2倍に制限し、デスクトップでの過度な拡大を防止

### 改善が必要な点

#### 6-1. 小型端末でのタッチ領域が不十分（優先度: 高）

幅360pxの端末で `canvasScale = 360 / 420 = 0.857` の場合、ボムボタンの実効サイズは `90 * 0.857 = 77px x 28 * 0.857 = 24px`。高さ24pxはタッチ操作に不適。

さらに、ミッション行のプログレスバー（高さ6px * 0.857 = 5px）や10pxフォントの progress 数値（実効約8.6px）は実質的に読み取り困難。

**修正案**: 4-1（ボムボタンサイズ拡大）と4-3（ミッションフォント拡大）の修正に加え、最小スケールのガードを追加。

```javascript
function handleResize() {
  const ww = window.innerWidth;
  const wh = window.innerHeight;
  canvasScale = Math.min(ww / GAME_WIDTH, wh / GAME_HEIGHT);
  canvasScale = Math.max(canvasScale, 0.75); // 最小スケール保証
  if (ww >= 600) canvasScale = Math.min(canvasScale, 1.2);
  // ...
}
```

#### 6-2. 横向きモード（ランドスケープ）の考慮がない（優先度: 中）

横向き（例: 800x400px）では `canvasScale = 400 / 720 = 0.556` で全体がかなり小さくなる。横向きを検知して回転を促すメッセージを表示すべき。

**修正案**:

```javascript
function handleResize() {
  const ww = window.innerWidth;
  const wh = window.innerHeight;
  const isLandscapeMobile = wh < ww * 0.7 && ww < 1024;
  // canvasScale 計算...

  // 横向き検知時は回転メッセージ表示用のフラグを立てる
  if (isLandscapeMobile) {
    // render() 内で「縦向きにしてください」メッセージを描画
  }
}
```

#### 6-3. PC向けのキーボード操作が未実装（優先度: 低）

PCブラウザでプレイする場合、マウス操作のみで左右キーやスペースキーでの操作に対応していない。アクセシビリティの観点からもキーボード対応が望ましい。

**修正案**:

```javascript
window.addEventListener('keydown', (e) => {
  if (showTitle) { showTitle = false; return; }
  if (gameOver) {
    if (e.key === 'Enter' || e.key === ' ') resetGame();
    return;
  }
  if (e.key === 'ArrowLeft') pointerX -= 5;
  if (e.key === 'ArrowRight') pointerX += 5;
  if (e.key === ' ' || e.key === 'Enter') doDrop();
  if (e.key === 'b' || e.key === 'B') {
    if (bombStock > 0) bombMode = !bombMode;
  }
  updateHeldPos();
});
```

---

## 7. 全体的な見映え

**現状評価: B+**

### 良い点

- **統一されたデザイン言語**: Material Designのカラーコード（`#3E2723` = Brown 900, `#5D4037` = Brown 700, `#FFF8E1` = Amber 50, `#FFD54F` = Amber 300 等）を全体的に一貫して使用
- **フォントの一貫性**: 全テキスト要素で `"Segoe UI", "Helvetica Neue", Arial, sans-serif` のフォントスタックを使用（Canvas描画テキスト含む）
- **Canvas単一描画**: HTML要素を一切使わず全てCanvas上に描画するアプローチにより、DOMとCanvasの描画ズレ・重なり問題が存在しない
- **ボール描画の品質**: 全11種が実物の特徴（ディンプル、縫い目、五角形パネル、グリップドット、リブ溝等）を備え、単なる色分けではない本格的なビジュアル
- **温かみのあるテーマ**: ダークブラウン + クリーム色が「木の箱にスポーツボールを落とす」ような温かみのある世界観を構成
- **ボールの影**: 各ボールの下に `ellipse(2, 3, r*0.9, r*0.5)` で楕円影を描画（`rgba(0,0,0,0.15)`）し、浮遊感と立体感を付加（前回レビュー提案の反映）
- **ボムの存在感**: 導火線 + スパーク + オレンジアウトラインの組み合わせにより、通常ボールとの明確な視覚的区別。スパークの常時アニメーションが画面に動きを加える
- **クリップ処理の適切さ**: ゲームエリアに `ctx.clip()` を設定し、ボールやエフェクトが壁外に描画されない

### 改善が必要な点

#### 7-1. ゲームエリアの「箱」感が弱い（優先度: 中）

壁は単色 `#5D4037` のフラットな矩形（803-806行目）で、奥行きや立体感がない。

**修正案**: 壁の内側にシャドウを追加して凹み感を出す。

```javascript
// ゲームエリア描画後に追加
// 左壁内側シャドウ
const wallShadowL = ctx.createLinearGradient(AREA_X, 0, AREA_X + 8, 0);
wallShadowL.addColorStop(0, 'rgba(0,0,0,0.15)');
wallShadowL.addColorStop(1, 'rgba(0,0,0,0)');
ctx.fillStyle = wallShadowL;
ctx.fillRect(AREA_X, AREA_Y, 8, AREA_H);

// 右壁内側シャドウ
const wallShadowR = ctx.createLinearGradient(AREA_X + AREA_W, 0, AREA_X + AREA_W - 8, 0);
wallShadowR.addColorStop(0, 'rgba(0,0,0,0.15)');
wallShadowR.addColorStop(1, 'rgba(0,0,0,0)');
ctx.fillStyle = wallShadowR;
ctx.fillRect(AREA_X + AREA_W - 8, AREA_Y, 8, AREA_H);

// 上部内側シャドウ（光源が上にある想定）
const wallShadowT = ctx.createLinearGradient(0, AREA_Y, 0, AREA_Y + 12);
wallShadowT.addColorStop(0, 'rgba(0,0,0,0.08)');
wallShadowT.addColorStop(1, 'rgba(0,0,0,0)');
ctx.fillStyle = wallShadowT;
ctx.fillRect(AREA_X, AREA_Y, AREA_W, 12);
```

#### 7-2. スコア表示にアニメーションがない（優先度: 中）

スコアが増加した際、数値が瞬時に変わるだけで視覚的フィードバックが弱い。フロートテキストで個別の得点は表示されるが、ヘッダーの合計スコア自体は静的。

**修正案**: カウントアップアニメーション + バウンスを追加。

```javascript
let displayScore = 0;
let scoreBounce = 1;

// updateEffects 内で
if (displayScore < score) {
  displayScore = Math.min(displayScore + Math.ceil((score - displayScore) * 0.15), score);
  scoreBounce = 1.12;
}
scoreBounce += (1 - scoreBounce) * 0.12; // スプリングバック

// drawHeader 内の SCORE 描画で
ctx.save();
const scoreText = 'SCORE: ' + displayScore;
const stw = ctx.measureText(scoreText).width;
ctx.translate(AREA_X + stw / 2, 36 + 8);
ctx.scale(scoreBounce, scoreBounce);
ctx.translate(-(AREA_X + stw / 2), -(36 + 8));
ctx.fillText(scoreText, AREA_X, 36);
ctx.restore();
```

#### 7-3. ゲームオーバー演出がやや唐突（優先度: 低）

即座に `rgba(0,0,0,0.72)` の半透明黒オーバーレイ + テキスト表示で、遷移アニメーションがない。

**修正案**: フェードインを追加。

```javascript
let gameOverFadeAlpha = 0;

function triggerGameOver() {
  gameOver = true;
  gameOverFadeAlpha = 0;
  // ...
}

// drawGameOverScreen 内
gameOverFadeAlpha = Math.min(gameOverFadeAlpha + 0.03, 0.72);
ctx.fillStyle = 'rgba(0,0,0,' + gameOverFadeAlpha + ')';
ctx.fillRect(0, 0, GAME_WIDTH, GAME_HEIGHT);

// テキスト類は gameOverFadeAlpha >= 0.72 になってから表示
if (gameOverFadeAlpha >= 0.72) {
  // GAME OVER テキスト等...
}
```

#### 7-4. 「NEW RECORD!」表示にアニメーションがない（優先度: 低）

ゲームオーバー画面の `NEW RECORD!` テキストが静的。達成感を高めるアニメーションが欲しい。

**修正案**: パルスアニメーションを追加（タイトル画面の TAP TO START と同じ手法）。

```javascript
if (isNewRecord) {
  const nrPulse = 0.7 + Math.sin(Date.now() * 0.005) * 0.3;
  ctx.save();
  ctx.globalAlpha = nrPulse;
  ctx.font = 'bold 22px "Segoe UI", Arial, sans-serif';
  ctx.fillStyle = '#FF4081';
  ctx.fillText('NEW RECORD!', GAME_WIDTH / 2, 395);
  ctx.restore();
}
```

---

## 優先度付き改善サマリーテーブル

| # | カテゴリ | 改善項目 | 優先度 | 難易度 | 期待効果 |
|---|---------|---------|--------|--------|---------|
| 1 | UI (4-1) | ボムボタンのタップ領域拡大 | **高** | 低 | モバイル操作性が大幅改善 |
| 2 | レスポンシブ (6-1) | 小型端末でのUI要素サイズ保証 | **高** | 低 | モバイルUX全般の改善 |
| 3 | タイトル (1-1) | 情報量の整理（2ページ化または簡略化） | **高** | 中 | 初見プレイヤーの離脱防止、情報の消化しやすさ |
| 4 | UI (4-2) | ヘッダーの圧縮（タイトル非表示化） | **中** | 低 | ゲームエリアの有効面積+20px拡大 |
| 5 | カラー (3-1) | Lv.7/Lv.10のオレンジ系色被り解消 | **中** | 低 | ボール識別性の向上 |
| 6 | UI (4-3) | ミッションテキスト/バーのサイズ拡大 | **中** | 低 | ミッション情報の可読性向上 |
| 7 | 見映え (7-2) | スコアカウントアップアニメーション | **中** | 中 | 得点の達成感・ジュース感向上 |
| 8 | 見映え (7-1) | 壁のインナーシャドウ追加 | **中** | 低 | ゲームフィールドの立体感向上 |
| 9 | レスポンシブ (6-2) | 横向きモード検知・対応 | **中** | 中 | ランドスケープユーザーへの適切な案内 |
| 10 | ボール (2-1) | バランスボールのリブ視認性改善 | **中** | 低 | Lv.11の見た目の質感向上 |
| 11 | タイトル (1-2) | ルール説明フォントサイズ拡大 | **中** | 低 | テキスト可読性向上 |
| 12 | タイトル (1-4) | TAP TO START位置の固定化 | **中** | 低 | レイアウト安定性の向上 |
| 13 | エフェクト (5-1) | フロートテキストの重なり回避 | 低 | 中 | 連続合体時の情報可読性 |
| 14 | エフェクト (5-2) | パーティクル数の上限設定 | 低 | 低 | パフォーマンスの安全性確保 |
| 15 | エフェクト (5-3) | ボム結果テキストの表示時間延長 | 低 | 低 | ボム効果の認識しやすさ向上 |
| 16 | ボール (2-2) | 進化チャート小サイズの簡略描画 | 低 | 中 | 小サイズ描画の効率と品質改善 |
| 17 | ボール (2-4) | レベル番号と模様の干渉回避 | 低 | 低 | ボール模様の美観向上 |
| 18 | タイトル (1-3) | ボムアイコン位置の微調整 | 低 | 低 | タイトル画面のバランス改善 |
| 19 | カラー (3-2) | デッドライン色の調整 | 低 | 低 | 危険表示の視認性向上 |
| 20 | 見映え (7-3) | ゲームオーバーフェードイン演出 | 低 | 中 | 画面遷移の洗練度向上 |
| 21 | 見映え (7-4) | NEW RECORD!パルスアニメーション | 低 | 低 | 達成感の演出強化 |
| 22 | UI (4-4) | Retryボタンのカーソルフィードバック | 低 | 低 | PC操作時のUX改善 |
| 23 | レスポンシブ (6-3) | キーボード操作対応 | 低 | 中 | PCアクセシビリティ改善 |
| 24 | ボール (2-3) | ハンドボールグリップドット配置拡張 | 低 | 低 | ボールテクスチャの自然さ向上 |

---

## 総合評価

### 総合スコア: **B+ (8.2 / 10)**

| 評価軸 | 評価 | スコア | 前回比 |
|--------|------|--------|--------|
| タイトル画面 | B+ | 8.0 | 新規追加 |
| ボール描画 | A- | 8.5 | B+→A- (大幅改善) |
| カラーパレット | A- | 8.5 | A-→A- (維持) |
| UI要素 | B+ | 8.0 | B→B+ (改善) |
| エフェクト | A | 9.0 | A-→A (ボムエフェクト追加) |
| レスポンシブ対応 | B | 7.5 | B+→B (高DPI対応済だが新規課題あり) |
| 全体的な見映え | B+ | 8.0 | B+→B+ (維持) |

### 前回レビュー(2026-02-09)からの改善状況

| 前回指摘 | 対応状況 |
|---------|---------|
| 高DPI対応 (最優先) | **対応済み** - `devicePixelRatio` を考慮した描画パイプライン実装 |
| ピンポン玉/野球ボール色差 | **対応済み** - `#F5F5F5`→`#FFF3E0` + アウトライン `#BDBDBD`→`#FFAB91` |
| ボールのドロップシャドウ | **対応済み** - `ellipse` による楕円影を全ボールに追加 |
| スカッシュボールにドット追加 | **対応済み** - 黄色スピードドット2個追加 |
| バランスボールにリブ追加 | **対応済み** - 7本の縦リブ追加（ただし視認性に課題あり） |
| ピンポン玉にライン追加 | **対応済み** - ブランドストライプとして実装 |
| ゲームエリア内側シャドウ | 未対応 |
| Retryボタンカーソル変更 | 未対応 |
| Web Font導入 | 未対応（低優先のため許容範囲） |

### 総評

本ゲームのUI/UXデザインは、**単一HTMLファイル + Canvas描画という制約の中で非常に高い完成度**を達成している。前回レビューからの2週間で、高DPI対応・ボールドロップシャドウ・各球種の模様追加（ストライプ、ドット、グラデーション強化、グリップドット、パネル塗り、リブ）・タイトル画面新設・ボムシステムUI・ミッションシステムUIと、大量の改善が施されている。

特筆すべきは**ボール描画の品質向上**で、11種全てが実物の特徴を備えた固有のビジュアルを持ち、ゲームの視覚的な魅力を大きく引き上げている。エフェクト系も充実しており、パーティクル・チェインテキスト・ボム爆発・導火線スパークの演出がゲームプレイの爽快感を支えている。

今後最も改善効果が高いのは、**(1) モバイルでのタッチ操作性**（ボムボタンサイズ拡大 + 小型端末対応）、**(2) タイトル画面の情報整理**（2ページ化による可読性向上）、**(3) ヘッダーの圧縮によるゲームエリア拡大** の3点である。これらを適用することで、プレイアビリティとファーストインプレッションの両方が大きく改善される。
